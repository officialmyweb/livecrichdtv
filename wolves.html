<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>dash.js ClearKey Player</title>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
  <style>
    body { background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
    video { width: 90%; max-width: 1000px; }
  </style>
</head>
<body>
  <video id="videoPlayer" controls autoplay></video>

  <script>
    const url = 'https://otte.live.fly.ww.aiv-cdn.net/pdx-nitro/live/clients/dash/enc/fg5nk2nauv/out/v1/37fe96ef48a74ac78bc598fa12caa8bd/cenc.mpd';
    const player = dashjs.MediaPlayer().create();
    player.initialize(document.querySelector("#videoPlayer"), url, true);

    player.setProtectionData({
      "org.w3.clearkey": {
        "clearkeys": {
          "f912fa528f10ba46e035c5fb6f988744": "8080b1f738fd62d6d692c7db101c4fbf"
        }
      }
    });

    // Performance tweak: enable fast switching & buffer control
    player.updateSettings({
      streaming: {
        buffer: {
          fastSwitchEnabled: true,
          stableBufferTime: 12,
          bufferTimeAtTopQuality: 20
        },
        abr: {
          autoSwitchBitrate: {
            video: true
          },
          useDefaultABRRules: true
        }
      }
    });
  </script>
</body>
</html>
