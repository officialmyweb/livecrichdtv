<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<title>Telegram Live Cric HD</title>

<!-- Shaka Player -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/shaka-player.ui.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.6/controls.min.css" crossorigin="anonymous">

<!-- Custom CSS -->
<link rel="stylesheet" href="https://lchdxfootball.pages.dev/livecrichd2.css">
<script src="https://lchdxfootball.pages.dev/sknzx.js"></script>

<style>
:root{
  --blue1:#0b3b8c;
  --blue2:#072b6a;
  --bg:#0a1733;
  --text:#ffffff;
  --cardBorder: rgba(30,120,255,.25);
  --shadow: rgba(0,0,0,.25);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg);
  color:var(--text);
}
.bar{max-width:980px;margin:14px auto;padding:0 12px;}
.pill{
  background:linear-gradient(90deg,var(--blue1),var(--blue2));
  padding:12px;border-radius:12px;
  text-align:center;font-weight:800;
  box-shadow:0 8px 20px var(--shadow);
}
.panel{
  background:#000;border-radius:6px;
  margin:12px 0;overflow:hidden;
  border:3px solid var(--cardBorder);
}
.shaka-video{width:100%;aspect-ratio:16/9;background:#000}
.section{
  background:linear-gradient(90deg,var(--blue1),var(--blue2));
  border-radius:12px;padding:14px;margin:12px 0;
}
.section h3{text-align:center;margin:0 0 10px}
.row{display:flex;justify-content:center}
.btn{
  padding:10px 16px;border-radius:12px;
  border:2px solid #fff;color:#fff;
  background:transparent;font-weight:700;
  cursor:pointer;text-decoration:none;
  display:inline-flex;align-items:center;gap:8px;
}
.btn img{width:20px}

.promo-card{
  display:block;margin:16px 0;
  border-radius:12px;overflow:hidden;
  border:2px solid #ffd700;
  box-shadow:0 0 15px rgba(255,215,0,.3);
  text-decoration:none;
}
.promo-card img{width:100%;display:block}
.promo-text-area{
  background:linear-gradient(90deg,#ffae00,#ffcc00);
  text-align:center;padding:12px;
  font-weight:900;color:#000;
}
#video-container {
  position: relative;
}
.shaka-logo {
  position: absolute;
}
 .logo{ color:var(--primary-color); font-weight:800; text-decoration:none; display:inline-flex; gap:10px; align-items:center; font-size:20px;}
    .logo small{ font-size:11px; color:var(--muted); font-weight:600; }

.shaka-spinner-container{display:none}
</style>
</head>

<body>

<div class="bar">
  <div class="pill">ÊŸÉªá´ á´‡ á´„Ê€Éªá´„ Êœá´…</div>

  <div class="panel">
    <div data-shaka-player-container>
      <video
        id="video"
        class="shaka-video"
        autoplay
        muted
        playsinline
        data-shaka-player
        poster="#">
      </video>
    </div>
  </div>

  <div class="section">
    <h3>ðŸ“£ Follow Us For More Updates</h3>
    <div class="row">
      <a class="btn" href="https://telegram.me/livecrichdofficial" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg">
       Click Here To Join Telegram Channel
      </a>
    </div>
  </div>

  <div class="section">
    <h3>Copy Link & Open in Chrome Only</h3>
    <div class="row">
      <button class="btn" onclick="navigator.share({url:location.href})">
        Click Here To Share This Page âœ¨
      </button>
    </div>
  </div>

  <a class="promo-card" href="https://winstrike365.com" target="_blank">
    <img src="https://i.ibb.co/HL6BMfCB/IMG-20260129-215157.jpg">
    <div class="promo-text-area">MAKE ID NOW</div>
  </a>
</div>

<script>
/* ===============================
   DOMAIN LOCK + TELEGRAM REDIRECT
================================= */

const allowedDomain = "livecrichdtv.pages.dev";
const telegramURL = "https://telegram.me/livecrichdofficial";

// Block iframe embedding + wrong domain
if (window.top !== window.self || location.hostname !== allowedDomain) {
  window.location.replace(telegramURL);
}

// Show Telegram popup after 3 seconds (better UX)
setTimeout(() => {
  if (confirm("Join Our Telegram Channel @livecrichdofficial")) {
    window.location.href = telegramURL;
  }
}, 3000);


/* ===============================
   DECRYPTION + STREAM VALIDATION
================================= */

const decryptionKey = "gf676rc7gr4grg78r6ag56gg8f76713f";
let selectedData = null;

function decryptBase64(data, key) {
  try {
    const bytes = atob(data);
    let output = "";

    for (let i = 0; i < bytes.length; i++) {
      output += String.fromCharCode(
        bytes.charCodeAt(i) ^ key.charCodeAt(i % key.length)
      );
    }

    return JSON.parse(output);

  } catch (error) {
    console.error("Decryption failed:", error);
    return null;
  }
}

const id = new URLSearchParams(window.location.search).get("id");

if (!id || typeof encodedChannelData === "undefined" || !encodedChannelData[id]) {
  alert("Invalid Stream ID");
  window.location.replace(telegramURL);
} else {

  selectedData = decryptBase64(encodedChannelData[id], decryptionKey);

  if (!selectedData || !selectedData.ManifestURI) {
    alert("Stream data corrupted");
    window.location.replace(telegramURL);
  }
}
</script>


<!-- ===================================================
     SHAKA PLAYER + UI + LOGO
=================================================== -->

<script>
async function initPlayer() {

  if (!selectedData) {
    console.error("No stream data available");
    return;
  }

  const video = document.getElementById("video");
  const container = document.getElementById("video-container");

  if (!video || !container) {
    console.error("Video element or container not found");
    return;
  }

  const ui = video.ui;
  const controls = ui.getControls();
  const player = controls.getPlayer();

  /* ===============================
     UI CONFIG
  =============================== */
  ui.configure({
    controlPanelElements: [
      'play_pause',
      'mute',
      'spacer',
      'time_and_duration',
      'quality',
      'fullscreen',
      'overflow_menu'
    ]
  });

  /* ===============================
     PLAYER CONFIG
  =============================== */
  player.configure({
    streaming: {
      rebufferingGoal: 5,
      bufferingGoal: 20
    },
    drm: {
      clearKeys: selectedData.DRMKeys || {}
    }
  });

  try {

    await player.load(selectedData.ManifestURI);
    console.log("Stream loaded successfully");

    /* ===============================
       LOGO ADD
    =============================== */

    const existingLogo = container.querySelector('.shaka-logo');
    if (existingLogo) existingLogo.remove();

    const logo = document.createElement('img');
    logo.className = 'shaka-logo';
    logo.src = 'https://d1gvwx1uptx1i3.cloudfront.net/khelocdn/public/assets/general_setting/winstrike/logo.png';
    logo.alt = 'Logo';

    logo.style.position = "absolute";
    logo.style.top = "10px";
    logo.style.right = "10px";
    logo.style.width = "90px";
    logo.style.zIndex = "9999";
    logo.style.pointerEvents = "none";

    container.appendChild(logo);

  } catch (error) {
    console.error("Shaka Load Error:", error);
  }
}
</script>
</body>
</html>
