<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no">
  <meta name="author" content="LiveCricHd Embed">
  <meta name="designer" content="LiveCricHd">
  <meta name="description" content="Join Telegram Channel @livecrichdofficial">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Telegram-Live-Cric-Hd</title>
  <link rel="stylesheet" href="https://cdn.plyr.io/3.6.2/plyr.css">
  <link href="https://cdn.jsdelivr.net/gh/halfmoonui/halfmoon@1.0.4/css/halfmoon.min.css" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.plyr.io/3.6.2/plyr.polyfilled.js"></script>
  <script src="premium.js"></script>
  
  <script>
    const allowedDomain = "livecrichdtv.pages.dev";
    if (window.top !== window.self || window.location.hostname !== allowedDomain) {window.top.location.href = "https://telegram.me/livecrichdofficial";}

    if (confirm("Join Our Telegram Channel @livecrichdofficial")) {window.location.href = "https://telegram.me/livecrichdofficial";}

    document.addEventListener("DOMContentLoaded", () => {
      const urlParams = new URLSearchParams(window.location.search);
      const streamId = urlParams.get("id");

      if (!streamId || !streamMap[streamId]) {
          console.error("Invalid or missing stream ID");
          return;
      }

      const streamUrl = streamMap[streamId];
      const videoElement = document.querySelector("video");

      const sourceElement = document.createElement("source");
      sourceElement.src = streamUrl;
      sourceElement.type = "application/x-mpegURL";
      videoElement.appendChild(sourceElement);

      const playerOptions = {};
      if (Hls.isSupported()) {
          const hlsConfig = { maxMaxBufferLength: 100 };
          const hls = new Hls(hlsConfig);

          hls.loadSource(streamUrl);
          hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {
              const qualities = data.levels.map(level => level.height);
              playerOptions.quality = {
                  default: qualities[0],
                  options: qualities,
                  forced: true,
                  onChange: function (newQuality) {
                      hls.levels.forEach((level, index) => {
                          if (level.height === newQuality) {
                              hls.currentLevel = index;
                          }
                      });
                  }
              };

              const player = new Plyr(videoElement, playerOptions);

              player.on('enterfullscreen', () => {
                  if (screen.orientation && screen.orientation.lock) {
                      screen.orientation.lock('landscape').catch(err => {
                          console.warn("Orientation lock failed:", err.message);
                      });
                  }
              });

              player.on('exitfullscreen', () => {
                  if (screen.orientation && screen.orientation.unlock) {
                      screen.orientation.unlock();
                  }
              });
          });

          hls.attachMedia(videoElement);
          window.hls = hls;
      } else {
          const player = new Plyr(videoElement, playerOptions);

          player.on('enterfullscreen', () => {
              if (screen.orientation && screen.orientation.lock) {
                  screen.orientation.lock('landscape').catch(err => {
                      console.warn("Orientation lock failed:", err.message);
                  });
              }
          });

          player.on('exitfullscreen', () => {
              if (screen.orientation && screen.orientation.unlock) {
                  screen.orientation.unlock();
              }
          });
      }
    });
  </script>
</head>
<body class="dark-mode with-custom-scrollbars with-custom-css-scrollbars">
  <video id="player" controls preload="metadata" poster="https://i.ibb.co/mBgdw0v/IMG-20240610-184601.jpg" class="plyr"></video>
</body>
</html>
