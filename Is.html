<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JWPlayer MPD + ClearKey</title>
  <script src="https://content.jwplatform.com/libraries/SAHhwvZq.js"></script>
  <style>
    html, body {
      margin:0; 
      padding:0; 
      width:100%; 
      height:100%; 
      background:#000; 
      overflow:hidden;
    }
    #player { 
      width:100%; 
      height:100%; 
    }
  </style>
</head>
<body>
  <div id="player"></div>

  <script>
    // JWPlayer license
    jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";

    // Setup player
    const playerInstance = jwplayer("player").setup({
      file: "https://ev-fast-mpd.starzplayarabia.com/live/eds/CricLifeMax/DASH/CricLifeMax.mpd",
      type: "dash",
      drm: {
        clearkey: {
          keyId: "ad59b720bd4b44d063686212b99484b5",
          key:   "e1744990edf98acc729c0773a3766583"
        }
      },
      width: "100%",
      aspectratio: "16:9",
      autostart: "viewable",
      mute: true,       // required for autoplay in iframe
      preload: "auto"
    });

    // Detect if in iframe and request autoplay explicitly
    if (window.self !== window.top) {
      playerInstance.on('ready', function() {
        playerInstance.play(true).catch(() => {
          console.warn("Autoplay blocked, muted fallback applied");
          playerInstance.setMute(true);
          playerInstance.play(true);
        });
      });
    }
  </script>
</body>
</html>
