<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram-Live-Cric-Hd</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shaka-player@4.16.2/dist/controls.css" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/shaka-player@4.16.2/dist/shaka-player.ui.min.js" crossorigin="anonymous"></script><style type="text/css">* {user-select: auto !important; -webkit-user-select: auto !important;}</style><input type="hidden" id="inject_idm_text_selection">
<link rel="stylesheet" href="https://lchdxfootball.pages.dev/livecrichd2.css">  
<script disable-devtool-auto="" src="https://cdn.jsdelivr.net/npm/disable-devtool"></script>
</head>
    <style>
        
body {
  margin:0;
  background:#000;
}

#player{
  width:100%;
  background:#000;
  position:relative;
  aspect-ratio:16/9;
}
    </style>
<body>
<div id="player"></div>
<!-- Load ONLY encoded data -->
<script src="https://lchdxfootball.pages.dev/sknzx.js"></script>
<script>
    const allowedDomain = "livecrichdtv.pages.dev";
    if (window.top !== window.self || window.location.hostname !== allowedDomain) {
        window.top.location.href = "https://telegram.me/livecrichdofficial";
    }

    if (confirm("Join Our Telegram Channel @livecrichdofficial")) { window.location.href = "https://telegram.me/livecrichdofficial"; }
// --------- DECRYPTION LOGIC HERE ---------
const decryptionKey = "gf676rc7gr4grg78r6ag56gg8f76713f";

function decryptBase64(encodedStr, key) {
    const decodedBytes = atob(encodedStr);
    let decryptedStr = '';
    for (let i = 0; i < decodedBytes.length; i++) {
        decryptedStr += String.fromCharCode(
            decodedBytes.charCodeAt(i) ^ key.charCodeAt(i % key.length)
        );
    }
    return JSON.parse(decryptedStr);
}

// --------- GET ID ----------
function getURLParameter(name) {
    const params = new URLSearchParams(window.location.search);
    return params.get(name);
}

const id = getURLParameter("id");

if (!encodedChannelData[id]) {
    alert("Invalid ID! Redirecting...");
    window.location.href = "https://telegram.me/livecrichdofficial";
}

// --------- DECRYPT ----------
const selectedData = decryptBase64(encodedChannelData[id], decryptionKey);

// Your real JSON structure
const manifestUri = selectedData.ManifestURI;
const keyId = Object.keys(selectedData.DRMKeys)[0];
const key = selectedData.DRMKeys[keyId];

// --------- ORIGINAL SHAKA FUNCTION ----------
function initShakaPlayer(url, keyId, key) {

  const container = document.getElementById('player');
  container.innerHTML = '';

  const video = document.createElement('video');
  video.style.width = '100%';
  video.style.height = '100%';
  video.setAttribute('playsinline', '');
  video.setAttribute('controls', '');
  video.setAttribute('autoplay', '');
  video.muted = true;
  video.controls = false;

  container.appendChild(video);

  const player = new shaka.Player(video);

  player.configure({
    drm: {
      clearKeys: {
        [keyId]: key
      }
    }
  });

  const ui = new shaka.ui.Overlay(player, container, video);

  const uiConfig = {
      controlPanelElements: [
        'play_pause',
        'mute',
        'volume',
        'time_and_duration',
        'spacer',
        'picture_in_picture',
        'overflow_menu',
        'fullscreen'
      ],
      addSeekBar: true,
      seekBarColors: {
        base: 'rgba(255, 255, 255, 0.3)',
        buffered: 'rgba(255, 255, 255, 0.5)',
        played: 'rgba(255,255,255,1)'
      },
      volumeBarColors: {
        base: 'rgba(255,255,255,0.3)',
        level: 'rgba(6,182,212,0.9)'
      }
    };

  ui.configure(uiConfig);

  player.load(url).then(() => {
    video.play().catch(e => console.error('Shaka play error', e));
  }).catch(e => console.error('Shaka load error', e));

  const logo = document.createElement("img");
  logo.src = "https://i.ibb.co/7VF2dfy/1000000077-removebg-preview.png";
  logo.alt = "Logo";
  logo.className = "logo";

  logo.addEventListener("click", function() {
      window.location.href = "https://telegram.me/livecrichdofficial";
  });

  container.appendChild(logo);

} // âœ… THIS WAS MISSING

// --------- START ----------
initShakaPlayer(manifestUri, keyId, key);
  </script>
</body>
</html>
