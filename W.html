<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>manggsgag</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- JW Player 8.38.4 -->
<script type="text/javascript" charset="utf-8" async src="https://ssl.p.jwpcdn.com/player/v/8.38.4/jwpsrv.js"></script>
<script src="https://content.jwplatform.com/libraries/SAHhwvZq.js"></script>
<style>
  body { margin:0; background:#000; }
  #player { width:100%; height:100vh; }
  * {user-select: auto !important; -webkit-user-select: auto !important;}
</style>
<input type="hidden" id="inject_idm_text_selection">
</head>
<body>
<div id="player"></div>

<script>
jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';

// DASH MPD URL
var mpdUrl = "https://jiotvbpkmob.cdn.jio.com/bpk-tv/Asia_Cup_Hindi_MOB/WDVLive/index.mpd?__hdnea__=st=1758174376~exp=1758260776~acl=/*~hmac=3e3d013e01a62fd576f1b6a3e1aab8a818ccb8292d11ac8e322b4cffcd96b38d";

// ClearKey DRM
var clearkeys = {
    "31b13c6f241055aaa965263f3115e684": "61f0cbc9599925a7be93d45e30b8ebe9"
};

// Extract __hdnea__ token from URL
function extractTokenFromLink(link){
    var match = link.match(/__hdnea__=([^&]+)/);
    return match ? match[1] : '';
}

// Set cookie
function setHdneaCookie(token){
    document.cookie = "__hdnea__=" + token + "; path=/";
}

// Intercept XHR requests to append token & headers
function interceptNetworkRequests(token){
    const origOpen = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function(method, url){
        if((url.includes('.mpd') || url.includes('.m4s') || url.includes('.ts')) && token && !url.includes('__hdnea__')){
            url += (url.includes('?') ? '&' : '?') + "__hdnea__=" + token;
        }
        this.setRequestHeader("Referer","https://www.jiotv.com/");
        this.setRequestHeader("User-Agent","plaYtv/7.1.5 (Linux;Android 13) ExoPlayerLib/2.11.6");
        this.setRequestHeader("Cookie","__hdnea__=" + token);
        return origOpen.apply(this, arguments);
    };
}

// Play video
function playVideo(){
    var tokenValue = extractTokenFromLink(mpdUrl);
    if(tokenValue){
        setHdneaCookie(tokenValue);
        interceptNetworkRequests(tokenValue);
    }

    jwplayer("player").setup({
        playlist:[{
            file: mpdUrl,
            type:"dash",
            drm:{
                clearkey:{
                    keys: clearkeys,
                    headers:{
                        "Referer":"https://www.jiotv.com/",
                        "User-Agent":"plaYtv/7.1.5 (Linux;Android 13) ExoPlayerLib/2.11.6",
                        "Cookie":"__hdnea__=" + tokenValue
                    }
                }
            }
        }],
        width:"100%",
        aspectratio:"16:9",
        autostart:true,
        cast:{appid:'CC1AD845'}
    });

    jwplayer().on('beforePlay', function(){
        interceptNetworkRequests(tokenValue);
    });
}

// Initialize on window load
window.onload = playVideo;
</script>
</body>
</html>
