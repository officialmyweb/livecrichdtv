<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JWPlayer JioTV DASH with Token</title>
<script type="text/javascript" charset="utf-8" async src="https://ssl.p.jwpcdn.com/player/v/8.38.4/jwpsrv.js"></script>
<script src="https://content.jwplatform.com/libraries/SAHhwvZq.js"></script>
<style>
  body { margin:0; background:#000; }
  #player { width:100%; height:100vh; }
</style>
</head>
<body>
<div id="player"></div>

<script>
// JW Player key
jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';

// DASH MPD URL
var mpdUrl = "https://jiotvbpkmob.cdn.jio.com/bpk-tv/Asia_Cup_Hindi_MOB/WDVLive/index.mpd?__hdnea__=st=1758174376~exp=1758260776~acl=/*~hmac=3e3d013e01a62fd576f1a62fd576f1b6a3e1aab8a818ccb8292d11ac8e322b4cffcd96b38d";

// __hdnea__ token
var hdneaToken = "st=1758174376~exp=1758260776~acl=/*~hmac=3e3d013e01a62fd576f1aab8a818ccb8292d11ac8e322b4cffcd96b38d";

// ClearKey DRM
var clearkeys = {
    "31b13c6f241055aaa965263f3115e684": "61f0cbc9599925a7be93d45e30b8ebe9"
};

// Append token to MPD URL
mpdUrl += "?__hdnea__=" + hdneaToken;

// Set __hdnea__ cookie
document.cookie = "__hdnea__=" + hdneaToken + "; path=/";

// Intercept XHR to append token to segment requests
(function(){
    const origOpen = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function(method, url){
        if((url.includes('.mpd') || url.includes('.m4s') || url.includes('.ts')) && !url.includes('__hdnea__')){
            url += (url.includes('?') ? '&' : '?') + "__hdnea__=" + hdneaToken;
        }
        return origOpen.apply(this, arguments);
    };
})();

// JW Player setup
jwplayer("player").setup({
    playlist:[{
        file: mpdUrl,
        type:"dash",
        drm:{
            clearkey:{
                keys: clearkeys
            }
        }
    }],
    width:"100%",
    aspectratio:"16:9",
    autostart:true,
    cast:{appid:'CC1AD845'}
});
</script>
</body>
</html>
