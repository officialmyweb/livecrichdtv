<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ISL 2025-26 Live</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
  text-align:center;
}

header{
  background:#1e293b;
  padding:15px;
  font-size:22px;
  font-weight:bold;
}

.match{
  background:#1e293b;
  margin:20px auto;
  padding:20px;
  width:92%;
  max-width:900px;
  border-radius:12px;
  box-shadow:0 0 15px rgba(0,0,0,0.4);
}

h2{
  margin-top:0;
}

button{
  padding:10px 14px;
  margin:6px;
  border:none;
  border-radius:8px;
  background:#2563eb;
  color:white;
  font-weight:bold;
  cursor:pointer;
  min-width:80px;
}

button:hover{
  background:#1d4ed8;
}

.back-btn{
  background:#dc2626;
}

.back-btn:hover{
  background:#b91c1c;
}

.lang-box, .quality-box{
  margin-top:15px;
}

.upcoming{
  color:#facc15;
  font-weight:bold;
  margin-top:10px;
}
</style>
</head>

<body>

<header>ISL 2025-26 Live Matches</header>

<div id="content"></div>

<script>

const workerURL = "YOUR_WORKER_URL"; // ðŸ”¥ Replace this

fetch(workerURL)
.then(res => res.json())
.then(data => {

  const container = document.getElementById("content");
  const grouped = {};

  // Group matches by title
  data.matches.forEach(match => {
    if(!grouped[match.title]){
      grouped[match.title] = [];
    }
    grouped[match.title].push(match);
  });

  Object.keys(grouped).forEach(title => {

    const matchDiv = document.createElement("div");
    matchDiv.className = "match";

    const titleEl = document.createElement("h2");
    titleEl.innerText = title;
    matchDiv.appendChild(titleEl);

    const matches = grouped[title];

    const isUpcoming = matches.every(m => m.status === "NOT_STARTED");

    if(isUpcoming){
      const up = document.createElement("div");
      up.className = "upcoming";
      up.innerText = "Upcoming Soon";
      matchDiv.appendChild(up);
      container.appendChild(matchDiv);
      return;
    }

    const langBox = document.createElement("div");
    langBox.className = "lang-box";

    const qualityBox = document.createElement("div");
    qualityBox.className = "quality-box";
    qualityBox.style.display = "none";

    matches.forEach(match => {

      if(match.status !== "LIVE") return;

      const langBtn = document.createElement("button");
      langBtn.innerText = match.language;

      langBtn.onclick = () => {

        langBox.style.display = "none";
        qualityBox.style.display = "block";
        qualityBox.innerHTML = "";

        const backBtn = document.createElement("button");
        backBtn.innerText = "â¬… Back";
        backBtn.className = "back-btn";

        backBtn.onclick = () => {
          qualityBox.style.display = "none";
          langBox.style.display = "block";
        };

        qualityBox.appendChild(backBtn);

        Object.keys(match.streams).forEach(q => {

          const qBtn = document.createElement("button");
          qBtn.innerText = q;

          // ðŸ”¥ Direct Redirect to M3U8
          qBtn.onclick = () => {
            window.location.href = match.streams[q];
          };

          qualityBox.appendChild(qBtn);
        });

      };

      langBox.appendChild(langBtn);
    });

    matchDiv.appendChild(langBox);
    matchDiv.appendChild(qualityBox);

    container.appendChild(matchDiv);

  });

})
.catch(err => {
  document.getElementById("content").innerHTML =
    "<p style='color:red;'>Failed to load matches.</p>";
});

</script>

</body>
</html>
